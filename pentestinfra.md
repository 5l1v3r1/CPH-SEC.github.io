## CPH:SEC - How to Build a Covert Pentesting Infrastructure Almost Free
#### a.k.a. Making a Cyberweapon with Stealth
##### v. 0.1 a

_Disclaimer & Caveat Lector: This article is for educational purposes only. The author is not responsible for any misuse or wrong doing. Always follow the law, whitehat hacking ethics, good business practice as well as industry standards._

+ By Shiva @ CPH:SEC : https://cph-sec.github.io/
+ Quality Control by xxx @ xxxx

### **Table of Contents**

1. #### [Introduction](#Introduction)
2. #### [TopicN](#TopicN)
3. #### [TopicN](#TopicN)
4. #### [TopicN](#TopicN)
5. #### [TopicN](#TopicN)
....
x. #### [Conclusion](#Conclusion)



### <a id="Introduction"></a>Introduction

 Ideas:
+ What is this article about?
+ What will we learn?
+ Why is this interesting/important?
+ How did you stumble upon this information?
+ Why did you study this?
+ Whats in it for me?

### <a id="localhost"></a>Attacker Local Host Setup

some text what whatever

#### <a id="checklist"></a>Check List

- Connected to a logless VPN
- Connected to the internet through Tor or other browser that does not allow fingerprinting
- DNS settings are configured to use a logless DNS
- Logged out of all online accounts
- Closed all apps and background services connected to the web
- All tracking in my browser and OS are turned off and blocked
- Emails are sent using burner accounts
- New accounts registered and logged in with burner emails
- Search with DuckDuckGo or StartPage
- Bitcoins are properly mixed and using a third-party wallet


#### <a id="scraping"></a>Scraping Proxies

In order to setup a proxy server (see Redsocks chapter) with random proxies first some must be fetched. This is done by using the tool "fetch-some-proxies"¹. Simply run ./fetch.sh to fetch proxies which will execute the following commands:

```
sudo python fetch-some-proxies/fetch.py | tee proxyscrape.tmp
sudo grep -e "elite" proxyscrape.tmp > proxyscrape2.tmp
sudo grep -e "socks5" proxyscrape2.tmp > proxyscrape.lst
rm proxyscrape*.tmp
cat proxyscrape.lst
```
Only socks5 proxies of the elite type is of interest as several protocols must be routed to the proxy and with as high an anonymity as possible.


#### <a id="redsocks"></a>Redsocks Install & Setup



#### <a id="TopicN"></a>Secure DNS

fasfdsaf

**DNS over Proxy**

fasfdsaf

**DNSCrypt-Proxy Install & Setup**


#### <a id="TopicN"></a>VPN

xxxx

##### <a id="TopicN"></a>Bitcoin Mixing / Tumbling



### <a id="TopicN"></a>VPS


#### <a id="TopicN"></a>How to Obtain VPS

xxxx

#### <a id="TopicN"></a>VPS Deployment


```
sudo git clone https://github.com/trustedsec/ptf.git
cd ptf
sudo ./bootstrap.sh
```

xxx

_Example of image_ : ![image](imagename.png)
Note: Github/Gitbook does not interpret HTML in MarkDown documents i.e. using HTML or CSS to center image is futile.

_Example of link / reference_ : Some interesting tekst that requires reference'.


_Example of code block_
```
$ sudo ./setup.sh install
or
$ sudo ./install.sh
$ sudo pip install -r requirements.txt
```

### <a id="TopicN"></a>TopicN

_Your text here_


### <a id="Conclusion"></a>Conclusion

_Ideas_
+ What did we learn?
+ Whats up next?
+ Thanks to xx


### Surf:

#### Tools
+ ¹fetch-some-proxies: https://github.com/stamparm/fetch-some-proxies
+ https://github.com/jorgenkg/python-proxy-rotator
+ https://github.com/allfro/pymiproxy
+ https://github.com/constverum/ProxyBroker

#### Multiple TOR Proxies
+ http://blog.databigbang.com/running-your-own-anonymous-rotating-proxies/
+ http://www.haproxy.org/
+ http://blog.databigbang.com/distributed-scraping-with-multiple-tor-circuits/
+ http://www.delegate.org/delegate/

#### Test
+ https://www.dnsleaktest.com
+ https://www.whatsmyip.org/
+ https://panopticlick.eff.org/

#### Redsocks and IPtables
https://superuser.com/questions/1401585/how-to-force-all-linux-apps-to-use-socks-proxy?rq=1
https://5socks.net/Manual/rdp_eng.html
https://crosp.net/blog/administration/install-configure-redsocks-proxy-centos-linux/
https://unix.stackexchange.com/questions/71429/redirect-all-non-local-traffic-to-a-socks-proxy
https://manpages.debian.org/stretch/iptables/iptables-extensions.8.en.html#TPROXY
Escape proxy hell with Redsocks: https://jmkhael.io/escape-proxy-hell-with-redsocks/

### Anon VPS
https://anonymously.io/anonymous-vps/
https://cheapvillage.com/cheap-anonymous-vps-providers/
Dreamhost with bitcoin: https://bitlaunch.io/

### DNSleak avoidance
https://www.smarthomebeginner.com/vpn-kill-switch-with-ufw/
https://support.rackspace.com/how-to/changing-dns-settings-on-linux/
https://unix.stackexchange.com/questions/128220/how-do-i-set-my-dns-when-resolv-conf-is-being-overwritten/163506#163506
https://unix.stackexchange.com/questions/494324/how-to-setup-dns-manually-on-linux

### Anon DNS servers
https://dns.watch
https://www.opennic.org/

### RDP
https://5socks.net/Manual/rdp_eng.html
https://5socks.net/Manual/what_is_rdp_vpn_eng.htm

### SSH Routing
https://linuxize.com/post/how-to-setup-ssh-socks-tunnel-for-private-browsing/
https://www.dnsflex.com/how-to-route-all-network-traffic-from-your-lan-securely-through-a-socks5-proxy-ssh-tunnel-redsocks/
https://hackertarget.com/ssh-examples-tunnels/

#### SSH routing with a service
https://serveo.net/
https://ngrok.com/
